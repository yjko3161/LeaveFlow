{% extends "base.html" %}

{% block header_title %}증명서 신청{% endblock %}

{% block content %}
<div class="max-w-2xl bg-white shadow-sm rounded-lg border border-gray-200 p-8">
    <form action="{{ url_for('certificate.request_cert') }}" method="POST" class="space-y-6">
        <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">증명서 종류</label>
            <select name="cert_type" class="w-full border-gray-300 rounded-md shadow-sm border p-2">
                <option value="EMPLOYMENT">재직증명서</option>
                <option value="CAREER">경력증명서</option>
                <option value="INCOME">소득증명서</option>
            </select>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">성명 (Name)</label>
                <input type="text" name="name" value="{{ current_user.name }}" required
                    class="w-full border-gray-300 rounded-md shadow-sm border p-2">
            </div>
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">주민등록번호 (RRN)</label>
                <input type="text" name="rrn" value="{{ current_user.resident_reg_number or '' }}"
                    placeholder="예: 900101-1234567" required
                    class="w-full border-gray-300 rounded-md shadow-sm border p-2">
            </div>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">입사일자 (Join Date)</label>
                <input type="date" name="join_date"
                    value="{{ current_user.join_date.strftime('%Y-%m-%d') if current_user.join_date else '' }}" required
                    class="w-full border-gray-300 rounded-md shadow-sm border p-2">
            </div>
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">주소 (Address)</label>
                <input type="text" name="address" value="{{ current_user.address or '' }}" required
                    class="w-full border-gray-300 rounded-md shadow-sm border p-2">
            </div>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">직급 (Rank)</label>
                <input type="text" name="position" value="{{ current_user.position or '' }}" required
                    class="w-full border-gray-300 rounded-md shadow-sm border p-2" placeholder="예: 부장, 과장, 대리">
            </div>
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">부서 (Department)</label>
                <input type="text" name="department" value="{{ current_user.department or '' }}" required
                    class="w-full border-gray-300 rounded-md shadow-sm border p-2" placeholder="예: 기술연구소, 경영지원팀">
            </div>
            <div class="md:col-span-2">
                <label class="block text-sm font-medium text-gray-700 mb-1">용도 (Purpose)</label>
                <input
                    class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
                    id="reason" name="reason" type="text" placeholder="예: 공공기관 제출용, 은행 제출용" required>
            </div>
        </div>

        <div class="mb-6">
            <label class="block text-gray-700 text-sm font-bold mb-2" for="issue_to">
                제출처 (Submit To)
            </label>
            <input
                class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
                id="issue_to" name="issue_to" type="text" placeholder="예: 국민은행, 주민센터">
        </div>

        <div class="pt-4 flex justify-end space-x-3">
            <a href="{{ url_for('certificate.list') }}"
                class="px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50">취소</a>
            <button type="submit"
                class="px-4 py-2 bg-indigo-600 text-white rounded-md text-sm font-medium hover:bg-indigo-700 shadow-sm">
                신청하기
            </button>
        </div>
    </form>
</div>
{% endblock %}