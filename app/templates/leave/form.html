{% extends "base.html" %}

{% block header_title %}연차 신청서{% endblock %}

{% block content %}
<div class="max-w-2xl bg-white shadow-sm rounded-lg border border-gray-200 p-8">
    <form action="{{ url_for('leave.new_request') }}" method="POST" class="space-y-6">
        <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">휴가 유형</label>
            <select name="leave_type"
                class="w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 border p-2">
                <option value="ANNUAL">연차 (일반 휴가)</option>
                <option value="HALF">반차 (오전/오후)</option>
                <option value="SICK">병가</option>
            </select>
        </div>

        <div class="grid grid-cols-2 gap-4">
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">시작일</label>
                <input type="date" name="start_date" required
                    class="w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 border p-2">
            </div>
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">종료일</label>
                <input type="date" name="end_date" required
                    class="w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 border p-2">
            </div>
        </div>

        <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">사유</label>
            <textarea name="reason" rows="3"
                class="w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 border p-2"
                placeholder="휴가 사유를 입력하세요"></textarea>
        </div>

        <div class="pt-4 flex justify-end space-x-3">
            <a href="{{ url_for('leave.index') }}"
                class="px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50">취소</a>
            <button type="submit"
                class="px-4 py-2 bg-indigo-600 text-white rounded-md text-sm font-medium hover:bg-indigo-700 shadow-sm">
                결재 요청 제출
            </button>
        </div>
    </form>
</div>
<script>
    document.addEventListener('DOMContentLoaded', function () {
        const today = new Date().toISOString().split('T')[0];
        const startInput = document.querySelector('input[name="start_date"]');
        const endInput = document.querySelector('input[name="end_date"]');

        if (!startInput.value) startInput.value = today;
        if (!endInput.value) endInput.value = today;
    });
</script>
{% endblock %}