{% extends "base.html" %}

{% block header_title %}설정{% endblock %}

{% block content %}
<div class="max-w-4xl bg-white shadow-sm rounded-lg border border-gray-200 p-8">
    <div class="mb-8 border-b pb-4">
        <h2 class="text-xl font-bold text-gray-900">전자 결재 서명</h2>
        <p class="mt-1 text-sm text-gray-500">결재란에 표시될 서명 이미지를 등록하세요.</p>
    </div>

    <form method="POST" action="{{ url_for('settings.upload_signature') }}" enctype="multipart/form-data"
        class="space-y-6 mb-12">
        <div class="flex items-center space-x-6">
            <div class="shrink-0">
                {% if signature_url %}
                <img class="h-24 w-24 object-contain border rounded-md p-1" src="{{ signature_url }}"
                    alt="Current Signature" />
                {% else %}
                <div
                    class="h-24 w-24 border-2 border-dashed border-gray-300 rounded-md flex items-center justify-center text-gray-400">
                    서명 없음
                </div>
                {% endif %}
            </div>
            <div class="flex-1">
                <label class="block text-sm font-medium text-gray-700">서명 이미지 (투명 배경 권장)</label>
                <input type="file" name="signature" accept="image/*" required class="mt-1 block w-full text-sm text-gray-500
                    file:mr-4 file:py-2 file:px-4
                    file:rounded-md file:border-0
                    file:text-sm file:font-semibold
                    file:bg-indigo-50 file:text-indigo-700
                    hover:file:bg-indigo-100">
            </div>
        </div>
        <div class="text-right">
            <button type="submit" class="px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700">서명
                등록/변경</button>
        </div>
    </form>

    <div class="mb-8 border-b pb-4 pt-8">
        <h2 class="text-xl font-bold text-gray-900">개인 정보 설정</h2>
        <p class="mt-1 text-sm text-gray-500">법인카드 번호 등 개인 정보를 관리합니다.</p>
    </div>

    <form method="POST" action="{{ url_for('settings.index') }}" class="space-y-6 mb-12">
        <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">법인카드 번호</label>
            <input type="text" name="card_number" value="{{ current_user.card_number or '' }}"
                placeholder="0000-0000-0000-0000" class="w-full border-gray-300 rounded-md shadow-sm border p-2">
            <p class="mt-1 text-xs text-gray-400">지출결의서 '비고'란에 자동으로 표시됩니다.</p>
        </div>
        <div class="text-right">
            <button type="submit" class="px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700">정보
                저장</button>
        </div>
    </form>

    <div class="mb-8 border-b pb-4 pt-8">
        <h2 class="text-xl font-bold text-gray-900">계정 보안</h2>
        <p class="mt-1 text-sm text-gray-500">비밀번호를 변경할 수 있습니다.</p>
    </div>

    <form method="POST" action="{{ url_for('settings.index') }}" class="space-y-6">
        <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">새 비밀번호</label>
            <input type="password" name="password" required
                class="w-full border-gray-300 rounded-md shadow-sm border p-2">
        </div>
        <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">비밀번호 확인</label>
            <input type="password" name="confirm" required
                class="w-full border-gray-300 rounded-md shadow-sm border p-2">
        </div>
        <div class="text-right">
            <button type="submit" class="px-4 py-2 bg-gray-800 text-white rounded-md hover:bg-gray-900">비밀번호 변경</button>
        </div>
    </form>
</div>
{% endblock %}